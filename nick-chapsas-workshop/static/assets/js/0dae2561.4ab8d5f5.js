"use strict";(self.webpackChunktesting_workshop=self.webpackChunktesting_workshop||[]).push([[3791],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=r.createContext({}),p=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(u.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,u=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(n),m=o,g=d["".concat(u,".").concat(m)]||d[m]||s[m]||a;return n?r.createElement(g,i(i({ref:t},c),{},{components:n})):r.createElement(g,i({ref:t},c))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=d;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var p=2;p<a;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},753:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>s,frontMatter:()=>a,metadata:()=>l,toc:()=>p});var r=n(7462),o=(n(7294),n(3905));const a={description:"The API that we'll be using for our deep dive into Unit testing"},i="The Foreign Exchange API",l={unversionedId:"unit-testing/deep-dive/api-intro",id:"unit-testing/deep-dive/api-intro",title:"The Foreign Exchange API",description:"The API that we'll be using for our deep dive into Unit testing",source:"@site/docs/unit-testing/deep-dive/api-intro.md",sourceDirName:"unit-testing/deep-dive",slug:"/unit-testing/deep-dive/api-intro",permalink:"/unit-testing/deep-dive/api-intro",draft:!1,tags:[],version:"current",frontMatter:{description:"The API that we'll be using for our deep dive into Unit testing"},sidebar:"docs",previous:{title:"Deep dive",permalink:"/category/deep-dive"},next:{title:"The QuoteService",permalink:"/unit-testing/deep-dive/quote-service"}},u={},p=[{value:"Running the API",id:"running-the-api",level:2},{value:"Calling the API",id:"calling-the-api",level:2},{value:"Example request",id:"example-request",level:3}],c={toc:p};function s(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"the-foreign-exchange-api"},"The Foreign Exchange API"),(0,o.kt)("p",null,'For the following "Deep Dive" section we will be using the ForeignExchange.Api project which you can find in ',(0,o.kt)("inlineCode",{parentName:"p"},"1.UnitTesting\\2.DeepDive\\src\\ForeignExchange.Api"),"."),(0,o.kt)("h2",{id:"running-the-api"},"Running the API"),(0,o.kt)("p",null,"In order to run this API you need to have Docker running on your machine. Once Docker is running you need to spin up the Postgres databases needed by the API."),(0,o.kt)("p",null,"To do that, open a terminal in the ",(0,o.kt)("inlineCode",{parentName:"p"},"ForeignExchange.Api")," directory and run:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-commandline"},"docker compose up\n")),(0,o.kt)("p",null,"Now that the database is running you can either run the API from your IDE directly or use:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-commandline"},"dotnet run\n")),(0,o.kt)("h2",{id:"calling-the-api"},"Calling the API"),(0,o.kt)("p",null,"The API has a single endpoint which provides a FX quote given a base and a quote currency and an amount of money."),(0,o.kt)("p",null,"Supported currencies: GBP, USD, EUR, AUD, CAD"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-http",metastring:"request",request:!0},"GET https://localhost:5001/forex/quotes/{baseCurrency}/{quoteCurrency}/{amount:decimal}\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"baseCurrency"),": The currency that you want to convert from"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"quoteCurrency"),": The currency that you want to convert into"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"amount"),": The amount of money you want to convert")),(0,o.kt)("h3",{id:"example-request"},"Example request"),(0,o.kt)("p",null,"Request:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-http",metastring:"request",request:!0},"GET https://localhost:5001/forex/quotes/USD/GBP/150\n")),(0,o.kt)("p",null,"Response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "baseCurrency": "USD",\n  "quoteCurrency": "GBP",\n  "baseAmount": 150,\n  "quoteAmount": 128.45542650\n}\n')),(0,o.kt)("p",null,"When the currency you are trying to use is not supported you will receive a 404 response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "type": "https://tools.ietf.org/html/rfc7231#section-6.5.4",\n    "title": "Not Found",\n    "status": 404,\n    "traceId": "00-5daef038211467a2a66949fc14b46f60-db38e2d156ec2aa2-00"\n}\n')),(0,o.kt)("p",null,"When your ",(0,o.kt)("inlineCode",{parentName:"p"},"baseCurrency")," is the same as your ",(0,o.kt)("inlineCode",{parentName:"p"},"quoteCurrency")," then you're getting a 400 response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "type": "https://tools.ietf.org/html/rfc7231#section-6.5.1",\n    "title": "One or more validation errors occurred.",\n    "status": 400,\n    "traceId": "0HMKMDGHMEBN3:00000004",\n    "errors": {\n        "Currency": [\n            "You cannot convert currency GBP to itself"\n        ]\n    }\n}\n')),(0,o.kt)("p",null,"When the amount you are trying to convert is less or equal to 0 then you're getting a 400 response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "type": "https://tools.ietf.org/html/rfc7231#section-6.5.1",\n    "title": "One or more validation errors occurred.",\n    "status": 400,\n    "traceId": "0HMKMDL2JLUI3:00000002",\n    "errors": {\n        "Amount": [\n            "You can only convert a positive amount of money"\n        ]\n    }\n}\n')))}s.isMDXComponent=!0}}]);